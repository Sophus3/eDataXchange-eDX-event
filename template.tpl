___TERMS_OF_SERVICE___

By creating or modifying this file you agree to Google Tag Manager's Community
Template Gallery Developer Terms of Service available at
https://developers.google.com/tag-manager/gallery-tos (or such other URL as
Google may provide), as modified from time to time.


___INFO___

{
  "type": "TAG",
  "id": "cvt_temp_public_id",
  "version": 1,
  "securityGroups": [],
  "displayName": "eDataXchange (eDX) Event Tag",
  "categories": ["ANALYTICS"],
  "brand": {
    "id": "Sophus3",
    "displayName": "Sophus3",
    "thumbnail": "data:image/png;base64,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"
  },
  "description": "This template provides the functionality to fire the S3Log tag",
  "containerContexts": [
    "WEB"
  ]
}


___TEMPLATE_PARAMETERS___

[
  {
    "type": "SELECT",
    "name": "s3LogName",
    "displayName": "Select an event",
    "macrosInSelect": false,
    "selectItems": [
      {
        "value": "/Conf_Complete",
        "displayValue": "Configurator Completed"
      },
      {
        "value": "/X_CD",
        "displayValue": "Contact Dealer Form Submitted"
      },
      {
        "value": "/X_RQ",
        "displayValue": "Request Quote Form Submitted"
      },
      {
        "value": "/X_TD",
        "displayValue": "Test Drive Form Submitted"
      },
      {
        "value": "/X_TI",
        "displayValue": "Trade-in Form Submitted"
      },
      {
        "value": "/X_Other",
        "displayValue": "Other Form Submitted"
      },
      {
        "value": "/Ecomm_Start",
        "displayValue": "Ecommerce Started"
      },
      {
        "value": "/Ecomm_Acc_Complete",
        "displayValue": "Ecommerce Checkout Account Completed"
      },
      {
        "value": "/Ecomm_Complete",
        "displayValue": "Ecommerce Order Completed"
      }
    ],
    "simpleValueType": true
  },
  {
    "type": "CHECKBOX",
    "name": "debugMode",
    "checkboxText": "Activate console log messages",
    "simpleValueType": true
  }
]


___SANDBOXED_JS_FOR_WEB_TEMPLATE___

/**
 * @fileoverview GTM Tag Template Script with dynamic logging, permission checks, and Matomo tracker handling.
 * 
 * Author: Darran Sheed, Shishir SUMON
 * Version: 1.0.0
 * Copyright (c) 2025. All rights reserved.
 * DateTime: 13-01-2025 17:00
 * 
 * This script dynamically logs information based on the `debugMode` flag, performs a permission check,
 * and integrates with Matomo tracker while also supporting a test mode for bypassing the tracker.
 */

/**
 * Import required modules for logging, permission queries, and interacting with window APIs.
 * These modules should be provided by the system.
 */
const logToConsole = require('logToConsole');
const queryPermission = require('queryPermission');
const callInWindow = require('callInWindow'); // Function to call API in window
const copyFromWindow = require('copyFromWindow'); // Function to copy from window

/**
 * Define dynamic logging based on the `debugMode` flag.
 * If `debugMode` is true, logs are printed to the console.
 * Otherwise, no logs are produced.
 */
const log = data.debugMode ? logToConsole : () => {};  // Dynamic logging function

/**
 * Retrieve the S3 log name parameter, defaulting to 'default_value' if not provided.
 */
const parameter = data.s3LogName || 'default_value';

/**
 * Attempt to copy the `s3` object from the window.
 * This object is expected to interact with Matomo for tracking.
 */
const s3Object = copyFromWindow('s3');
const s3edx = s3Object.edx;

// Check if `s3edx.logEvent` exists and is a valid function.
if (s3edx && typeof s3edx !=='undefined' && typeof s3edx.logEvent === 'function' && s3edx.pageViewTracked) {
  
  // Call the `logEvent` function with the specified log name.
  s3edx.logEvent(data.s3LogName, (result) => {
    
    log(result);
    
    // Log the parameter value used in the logging call.
    log('Calling logEvent with parameter: ' + parameter);
    
        if (typeof result.status !== 'undefined' && result.status === 'error') {
            log(result.msg);
            data.gtmOnFailure();
        } else {
            log(data.s3LogName+' '+result.msg);
             /**
              * Complete the GTM tag execution by signaling success.
              * This triggers the completion of the tag execution process in Google Tag Manager.
              */
            data.gtmOnSuccess();
        }
    });

} else {
  log('CGTM_ERROR: logEvent function is not available in the s3edx object.');
  data.gtmOnFailure();
}


___WEB_PERMISSIONS___

[
  {
    "instance": {
      "key": {
        "publicId": "logging",
        "versionId": "1"
      },
      "param": [
        {
          "key": "environments",
          "value": {
            "type": 1,
            "string": "debug"
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "access_globals",
        "versionId": "1"
      },
      "param": [
        {
          "key": "keys",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "s3"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  }
]


___TESTS___

scenarios: []


___NOTES___

Created on 1/15/2025, 5:19:49 PM


